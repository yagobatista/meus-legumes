<div class="container">
  <div class="row">
    <article class="col-md-2 col-xs-6 col-sm-3 produtos legumes">
         <h1 class="text-center nome">Batata</h1>
         <img src="img/legumes/batata.png" class="foto-produto img-responsive" alt="foto de uma batata">
         <h3 class="preco"></h3>
         <h3>Quantidade:</h3>
         <select name="qtd" onchange="mudaQtd(0)" class="qtd form-control ">
   <option value="0"></option>
   <option value="1">1 kg</option>
   <option value="2">2 kg</option>
   <option value="3">3 kg</option>
   <option value="4">4 kg</option>
   </select>
         <h2 id="valorTotal" class="valorTotal"></h2>
         <button class="btn-default botao carrinho" onclick="addCarrinho(0)">+ Adicionar ao carrinho</button>
     </article>
     <article class="col-md-2 col-xs-6 col-sm-3  produtos legumes">
         <h1 class="text-center nome">Cebola</h1>
         <img src="img/legumes/cebola.jpg" class="foto-produto img-responsive" alt="logo da confeitaria certas tortas">
         <h3 class="preco"></h3>
         <h3>Quantidade:</h3>
         <select name=\ "qtd\" onchange="mudaQtd(1)" class="qtd form-control ">
   <option value="0"></option>
   <option value="1">1 kg</option>
   <option value="2">2 kg</option>
   <option value="3">3 kg</option>
   <option value="4">4 kg</option>
   </select>
         <h2 class="valorTotal"></h2>
         <button class="btn-default botao carrinho" onclick="addCarrinho(1)">+ Adicionar ao carrinho</button>
     </article>
   <article class="col-md-2 col-xs-6 col-sm-3 produtos  legumes">
     <h1 class="text-center nome">Cenoura</h1>
     <img src="img/legumes/cenoura.png" class="foto-produto img-responsive" alt="foto de uma cenoura">
     <h3 class="preco"></h3>
     <h3>Quantidade:</h3>
     <select name=\ "qtd\" onchange="mudaQtd(2)" class="qtd form-control ">
   <option value="0"></option>
   <option value="1">1 kg</option>
   <option value="2">2 kg</option>
   <option value="3">3 kg</option>
   <option value="4">4 kg</option>
   </select>
     <h2 class="valorTotal"></h2>
     <button class="btn-default botao carrinho" onclick="addCarrinho(2)">+ Adicionar ao carrinho</button>
   </article>
   <article class="col-md-2 col-xs-6 col-sm-3  produtos  legumes">
     <h1 class="text-center nome">Tomate</h1>
     <img src="img/legumes/tomate.jpg" class="foto-produto img-responsive" alt="foto de um tomate">
     <h3 class="preco"></h3>
     <h3>Quantidade:</h3>
     <select name=\ "qtd\" onchange="mudaQtd(3)" class="qtd form-control ">
   <option value="0"></option>
   <option value="1">1 kg</option>
   <option value="2">2 kg</option>
   <option value="3">3 kg</option>
   <option value="4">4 kg</option>
   </select>
     <h2 class="valorTotal"></h2>
     <button class="btn-default botao carrinho" onclick="addCarrinho(3)">+ Adicionar ao carrinho</button>
   </article>
   <article class="col-md-2 col-xs-6 col-sm-3 produtos legumes">
     <h1 class="text-center nome">Alho</h1>
     <img src="img/legumes/alho.png" class="foto-produto img-responsive" alt="foto de um alho">
     <h3 class="preco"></h3>
     <h3>Quantidade:</h3>
     <select name=\ "qtd\" onchange="mudaQtd(4)" class="qtd form-control ">
   <option value="0"></option>
   <option value="1">1 kg</option>
   <option value="2">2 kg</option>
   <option value="3">3 kg</option>
   <option value="4">4 kg</option>
   </select>
     <h2 class="valorTotal"></h2>
     <button class="btn-default botao carrinho" onclick="addCarrinho(4)">+ Adicionar ao carrinho</button>
   </article>
   <article class="col-md-2 col-xs-6 col-sm-3  produtos ovos">
     <h1 class="text-center nome">Ovos</h1>
     <img src="img/ovos/ovos.png" class="foto-produto img-responsive" alt="ovos">
     <h3 class="preco"></h3>
     <h3>Quantidade:</h3>
     <select name=\ "qtd\" onchange="mudaQtd(5)" class="qtd form-control">
   <option value="0"></option>
   <option value="1">1 dúzia</option>
   <option value="2">2 dúzias</option>
   <option value="3">3 dúzia</option>
   <option value="4">4 dúzias</option>
   </select>
     <h2 class="valorTotal"></h2>
     <button class="btn-default botao carrinho" onclick="addCarrinho(5)">+ Adicionar ao carrinho</button>
   </article>
   <article class="col-md-2 col-xs-6  col-sm-3 produtos verduras">
     <h1 class="text-center nome">Couve</h1>
     <img src="img/verduras/couve.jpg" class="foto-produto img-responsive" alt="foto de uma couve">
     <h3 class="preco"></h3>
     <h3>Quantidade:</h3>
     <select name=\ "qtd\" onchange="mudaQtd(6)" class="qtd form-control ">
   <option value="0"></option>
   <option value="1">1 kg</option>
   <option value="2">2 kg</option>
   <option value="3">3 kg</option>
   <option value="4">4 kg</option>
   </select>
     <h2 class="valorTotal"></h2>
     <button class="btn-default botao carrinho" onclick="addCarrinho(6)">+ Adicionar ao carrinho</button>
   </article>
   <article class="col-md-2 col-xs-6 col-sm-3  produtos acai">
     <h1 class="text-center nome">Açaí</h1>
     <img src="img/acai.png" class="foto-produto img-responsive" alt="foto de um pote de açaí">
     <h3 class="preco"></h3>
     <h3>Quantidade:</h3>
     <select name=\ "qtd\" onchange="mudaQtd(7)" class="qtd form-control">
   <option value="0"></option>
   <option value="1">1 kg</option>
   <option value="2">2 kg</option>
   <option value="3">3 kg</option>
   <option value="4">4 kg</option>
   </select>
     <h2 class="valorTotal"></h2>
     <button class="btn-default botao carrinho" onclick="addCarrinho(7)">+ Adicionar ao carrinho</button>
   </article>


  </div>

</div>
<script type="text/javascript">
var valores = [
  <?php
      $i=0;
      for (; $i < count($vetorDePrecos); $i++) {
          echo $vetorDePrecos[$i] . " , ";
      }
      echo $vetorDePrecos[$i];
   ?>];
   function calcularValorDoCarrinho() {
       var valorToral = 0;
       for (var i = 0; i < valores.length; i++) {
           if (document.getElementById("qtdCarrinho" + i)) {
               valorToral = valorToral + (valores[i] * document.getElementById("qtdCarrinho" + i).options[document.getElementById("qtdCarrinho" + i).selectedIndex].value);
           }
       }
       document.getElementById("valorDoTotal").innerHTML = "Total: R$ " + valorToral.toFixed(2);
   }

   function remover(item) {
       var produto = document.getElementById(item);
       produto.parentNode.removeChild(produto);
       var carrinho = document.getElementsByClassName("carrinho")[item]
       carrinho.innerHTML = "+ Adicionar ao carrinho";
       carrinho.value = "removido";
       calcularValorDoCarrinho();
   }

   function mudaQtdCarrinho(pos, valor) {
       var e1 = document.getElementsByClassName("qtd")[pos];
       var e = document.getElementById("qtdCarrinho" + pos);
       e1.options[e.selectedIndex].selected = true;
       var qtd = e.options[e.selectedIndex].value;
       if (qtd == 0) {
           document.getElementById("subValor" + pos).innerHTML = "";
           document.getElementsByClassName("valorTotal")[pos].innerHTML = "";
       } else {
           document.getElementById("subValor" + pos).innerHTML = "R$ " + (qtd * valor).toFixed(2);
           document.getElementsByClassName("valorTotal")[pos].innerHTML = "R$ " + (qtd * valor).toFixed(2);
       }
       calcularValorDoCarrinho();
   }

   function mudaQtd(pos, valor) {
       var e = document.getElementsByClassName("qtd")[pos];
       var qtd = e.options[e.selectedIndex].value;
       if (qtd == 0) {
           document.getElementsByClassName("valorTotal")[pos].innerHTML = "";
       } else {
           document.getElementsByClassName("valorTotal")[pos].innerHTML = "R$ " + (qtd * valor).toFixed(2);
       }
       calcularValorDoCarrinho();

   }
</script>

<?php
// $db =  mysqli_connect("bdmeuslegumes.mysql.uhserver.com","meuslegumes","meusLe12@","bdmeuslegumes")
// or die("Erro na conexão com o banco de dados.");
// $query = "SELECT codI,nomei,tipo,caminhoImagem,preco FROM item ORDER BY codI;";
// mysqli_set_charset($db , "utf8");
// $result = mysqli_query($db,$query)
// or die('Error querying database.');
// $qtdItens = mysqli_num_rows($result);
// $vetor = mysqli_fetch_array($result);
// $vetorDePrecos;
// for ($i=0; $i < $qtdItens ; $i++) {
//   $id = $vetor["codI"];
//   $nome = $vetor["nomei"];
//   $tipo = $vetor["tipo"];
//   $caminhoImagem = $vetor["caminhoImagem"];
//   $preco = $vetor["preco"];
//   $vetorDePrecos[$i] = $preco;
//    echo"<article class=\"col-md-2 col-xs-6 col-sm-3 produtos $tipo\">
//          <h1 class=\"text-center nome\">$nome</h1>
//          <img src=\"$caminhoImagem\" class=\"foto-produto img-responsive\" alt=\"foto de uma batata\">
//          <h3 class=\"preco\">$preco<span class='kilo'>/kg</span></h3>
//          <h3>Quantidade:</h3>
//          <select name=\"qtd\" onchange=\"mudaQtd($id,$preco)\" class=\"qtd form-control \">";
//    echo "    <option value=\"0\"></option>
//             <option value=\"1\">1 kg</option>
//             <option value=\"2\">2 kg</option>
//             <option value=\"3\">3 kg</option>
//             <option value=\"4\">4 kg</option>";
//    echo "</select>
//          <h2 id=\"valorTotal\" class=\"valorTotal\"></h2>
//          <button class=\"btn-default botao carrinho\" onclick=\"addCarrinho($id,$preco)\">+ Adicionar ao carrinho</button>
//      </article>";
//      $vetor = mysqli_fetch_array($result);
// }
 ?>
